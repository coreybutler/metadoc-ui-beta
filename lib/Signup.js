import API from"./client.js";var Signup=new JET.Interface({namespace:"section.signup .width.constraint",properties:{submitDisabled:!1},references:{emailControl:"author-control.email"},states:{idle:{on(e,s){this.emit("render",!1,s)},transitions:{LOADING:"loading"}},loading:{on(){this.emit("render",!0)},transitions:{TRYAGAIN:"idle",SUCCESS:"success"}},success:{transitions:{TRYAGAIN:"idle"},on(e,s){this.replaceHTML([["div",{class:"registered result"},[["p",{class:"text-bold"},["Thank you for registering! You will receive updates at:"]],["div",{class:"email"},[s]],["footer",[["a",{class:"reset",href:"#"},{click:e=>{e.preventDefault(),this.transition("TRYAGAIN")}},["Register another email address"]]]]]]])}}},on:{email:{submit(e){this.transition("LOADING"),API.register(e,s=>{if(s)return this.transition("TRYAGAIN",s);this.transition("SUCCESS",e)})}},property:{submitDisabled:{changed(e){this.emit("render")}}},render(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],s=arguments.length>1?arguments[1]:void 0,{submitDisabled:t}=this.properties;this.renderHTML([["p",{class:"text-bold"},["Sign up to be the first to hear about updates!"]],["author-control",{class:[{disabled:e,error:!!s},"email"]},[["div",{class:"input"},[["div",{class:"wrapper"},[["author-icon",{src:"assets/icons/mail.svg"}],["input",{type:"text",placeholder:"Enter your email address"},{keydown:e=>{"Enter"===e.key&&this.emit("email.submit",this.refs.emailControl.value)},input:e=>this.properties.submitDisabled=""===e.target.value||!e.target.value}]]],!!s&&["div",{class:"error"},[["author-icon",{src:"assets/icons/alert.svg"}],["span",{class:"message"},[s]]]]]],["button",{disabled:t,class:[{loading:e},"submit"]},{click:e=>{e.preventDefault(),this.emit("email.submit",this.refs.emailControl.value)}},[["span",{class:"label"},["Stay Informed"]],["md-loader"]]]]]])}}});export default Signup;